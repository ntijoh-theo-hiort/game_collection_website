<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Top Level Namespace
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/custom.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo;
    
    
    <span class="title">Top Level Namespace</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Top Level Namespace
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></dd>
  </dl>
  
  

  

  
</div>

<h2>Defined Under Namespace</h2>
<p class="children">
  
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span>
    
  
    
  
</p>







  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__-instance_method" title="#GET / (instance method)">#<strong>GET /</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Display Landing Page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET___four_oh_four-instance_method" title="#GET /:four_oh_four (instance method)">#<strong>GET /:four_oh_four</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>If no other routes match, you will automatically land on this one.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__database-instance_method" title="#GET /database (instance method)">#<strong>GET /database</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays list of links to all games in database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__database__id-instance_method" title="#GET /database/:id (instance method)">#<strong>GET /database/:id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays some information about the selected game and an image of renowned programmer Theo Hiort holding that game.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__database_edit-instance_method" title="#GET /database/edit (instance method)">#<strong>GET /database/edit</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays list of all games in database along with forms for editing their attributes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__database_new-instance_method" title="#GET /database/new (instance method)">#<strong>GET /database/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Displays form for entering a new game into the database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__error-instance_method" title="#GET /error (instance method)">#<strong>GET /error</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Error page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#GET__login-instance_method" title="#GET /login (instance method)">#<strong>GET /login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Simple login and account creation page.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST___id_deletecomment__comment_id-instance_method" title="#POST /:id/deletecomment/:comment_id (instance method)">#<strong>POST /:id/deletecomment/:comment_id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes a comment from the database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST___id_writecomment-instance_method" title="#POST /:id/writecomment (instance method)">#<strong>POST /:id/writecomment</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Submits a comment into the database along with the current user’s id, the game’s id and its own unique comment id.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__createaccount-instance_method" title="#POST /createaccount (instance method)">#<strong>POST /createaccount</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates a new user depending on if the password is acceptable and username isn’t already taken.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__database__id_delete-instance_method" title="#POST /database/:id/delete (instance method)">#<strong>POST /database/:id/delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Deletes a game from the database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__database__id_update-instance_method" title="#POST /database/:id/update (instance method)">#<strong>POST /database/:id/update</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updates a game’s attributes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__database_new-instance_method" title="#POST /database/new (instance method)">#<strong>POST /database/new</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Inserts a new game into the database.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__login-instance_method" title="#POST /login (instance method)">#<strong>POST /login</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the session variable “whosloggedin” to your username if you enter the right password for an existing username.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="top-level-namespace.html#POST__logout-instance_method" title="#POST /logout (instance method)">#<strong>POST /logout</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets the session variable “whosloggedin” to nil.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Model.html#add_comment-class_method" title="Model.add_comment (method)">add_comment</a></span>, <span class='object_link'><a href="Model.html#add_game_genres-class_method" title="Model.add_game_genres (method)">add_game_genres</a></span>, <span class='object_link'><a href="Model.html#all_consoles-class_method" title="Model.all_consoles (method)">all_consoles</a></span>, <span class='object_link'><a href="Model.html#all_games-class_method" title="Model.all_games (method)">all_games</a></span>, <span class='object_link'><a href="Model.html#all_genres-class_method" title="Model.all_genres (method)">all_genres</a></span>, <span class='object_link'><a href="Model.html#comments_by_game_id-class_method" title="Model.comments_by_game_id (method)">comments_by_game_id</a></span>, <span class='object_link'><a href="Model.html#console_hash_by_game_id-class_method" title="Model.console_hash_by_game_id (method)">console_hash_by_game_id</a></span>, <span class='object_link'><a href="Model.html#create_account-class_method" title="Model.create_account (method)">create_account</a></span>, <span class='object_link'><a href="Model.html#create_id_for_new_game-class_method" title="Model.create_id_for_new_game (method)">create_id_for_new_game</a></span>, <span class='object_link'><a href="Model.html#delete_comment-class_method" title="Model.delete_comment (method)">delete_comment</a></span>, <span class='object_link'><a href="Model.html#delete_game-class_method" title="Model.delete_game (method)">delete_game</a></span>, <span class='object_link'><a href="Model.html#game_genres_delete_all_by_game_id-class_method" title="Model.game_genres_delete_all_by_game_id (method)">game_genres_delete_all_by_game_id</a></span>, <span class='object_link'><a href="Model.html#game_genres_insert_new-class_method" title="Model.game_genres_insert_new (method)">game_genres_insert_new</a></span>, <span class='object_link'><a href="Model.html#game_hash_by_id-class_method" title="Model.game_hash_by_id (method)">game_hash_by_id</a></span>, <span class='object_link'><a href="Model.html#genre_name_by_id-class_method" title="Model.genre_name_by_id (method)">genre_name_by_id</a></span>, <span class='object_link'><a href="Model.html#genres_of_game_by_id-class_method" title="Model.genres_of_game_by_id (method)">genres_of_game_by_id</a></span>, <span class='object_link'><a href="Model.html#insert_into_new_game-class_method" title="Model.insert_into_new_game (method)">insert_into_new_game</a></span>, <span class='object_link'><a href="Model.html#pwdigest_by_username-class_method" title="Model.pwdigest_by_username (method)">pwdigest_by_username</a></span>, <span class='object_link'><a href="Model.html#update_game-class_method" title="Model.update_game (method)">update_game</a></span>, <span class='object_link'><a href="Model.html#user_id_by_username-class_method" title="Model.user_id_by_username (method)">user_id_by_username</a></span>, <span class='object_link'><a href="Model.html#username_by_comment_id-class_method" title="Model.username_by_comment_id (method)">username_by_comment_id</a></span>, <span class='object_link'><a href="Model.html#username_by_user_id-class_method" title="Model.username_by_user_id (method)">username_by_user_id</a></span>, <span class='object_link'><a href="Model.html#username_is_admin%3F-class_method" title="Model.username_is_admin? (method)">username_is_admin?</a></span>, <span class='object_link'><a href="Model.html#username_is_unique%3F-class_method" title="Model.username_is_unique? (method)">username_is_unique?</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="GET__-instance_method">
  
    #<strong>GET /</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Display Landing Page</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#all_games-class_method" title="Model.all_games (method)">Model.all_games</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 24</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_amount'>amount</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all_games'><span class='object_link'><a href="Model.html#all_games-class_method" title="Model.all_games (method)">all_games</a></span></span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:start</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>amount:</span><span class='id identifier rubyid_amount'>amount</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET___four_oh_four-instance_method">
  
    #<strong>GET /:four_oh_four</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>If no other routes match, you will automatically land on this one. Only works when logged in,  as entering any route other than accepted ones while not logged in will display an error message telling you to log in. This is intended behavior since users who don’t want to create an account don’t deserve to see the beautiful 404 page.</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 155</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/:four_oh_four</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:four_oh_four</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__database-instance_method">
  
    #<strong>GET /database</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays list of links to all games in database</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#all_games-class_method" title="Model.all_games (method)">Model.all_games</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


32
33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 32</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_games'>games</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all_games'><span class='object_link'><a href="Model.html#all_games-class_method" title="Model.all_games (method)">all_games</a></span></span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;games/index&#39;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>games:</span><span class='id identifier rubyid_games'>games</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__database__id-instance_method">
  
    #<strong>GET /database/:id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays some information about the selected game and an image of renowned programmer Theo Hiort holding that game. Also has a comment form where any user can submit their comments which are shown underneath the form.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ID of the game</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#game_hash_by_id-class_method" title="Model.game_hash_by_id (method)">Model.game_hash_by_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#console_hash_by_game_id-class_method" title="Model.console_hash_by_game_id (method)">Model.console_hash_by_game_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#genres_of_game_by_id-class_method" title="Model.genres_of_game_by_id (method)">Model.genres_of_game_by_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#genre_name_by_id-class_method" title="Model.genre_name_by_id (method)">Model.genre_name_by_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#comments_by_game_id-class_method" title="Model.comments_by_game_id (method)">Model.comments_by_game_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#username_by_comment_id-class_method" title="Model.username_by_comment_id (method)">Model.username_by_comment_id</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 101</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/:id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_game'>game</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_game_hash_by_id'><span class='object_link'><a href="Model.html#game_hash_by_id-class_method" title="Model.game_hash_by_id (method)">game_hash_by_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_console'>console</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_console_hash_by_game_id'><span class='object_link'><a href="Model.html#console_hash_by_game_id-class_method" title="Model.console_hash_by_game_id (method)">console_hash_by_game_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_genre_ids'>genre_ids</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_genres_of_game_by_id'><span class='object_link'><a href="Model.html#genres_of_game_by_id-class_method" title="Model.genres_of_game_by_id (method)">genres_of_game_by_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_genres'>genres</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_genres'>genres</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_genre_name_by_id'><span class='object_link'><a href="Model.html#genre_name_by_id-class_method" title="Model.genre_name_by_id (method)">genre_name_by_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_genre_ids'>genre_ids</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_whosloggedin'>whosloggedin</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_genre_ids'>genre_ids</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>&gt;</span> <span class='int'>2</span>
    <span class='id identifier rubyid_genre_ids'>genre_ids</span><span class='lbracket'>[</span><span class='int'>1</span><span class='op'>...</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_genre_id'>genre_id</span><span class='op'>|</span>
      <span class='id identifier rubyid_genres'>genres</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>, </span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_genre_name_by_id'><span class='object_link'><a href="Model.html#genre_name_by_id-class_method" title="Model.genre_name_by_id (method)">genre_name_by_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_genre_id'>genre_id</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_genre_ids'>genre_ids</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='id identifier rubyid_genre_or_genres'>genre_or_genres</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>genre</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_genres'>genres</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> and </span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_genres'>genres</span> <span class='op'>&lt;&lt;</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_genre_name_by_id'><span class='object_link'><a href="Model.html#genre_name_by_id-class_method" title="Model.genre_name_by_id (method)">genre_name_by_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_genre_ids'>genre_ids</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_genre_or_genres'>genre_or_genres</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>genres</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_genres'>genres</span> <span class='op'>=</span> <span class='id identifier rubyid_genres'>genres</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  

  <span class='id identifier rubyid_comments'>comments</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_comments_by_game_id'><span class='object_link'><a href="Model.html#comments_by_game_id-class_method" title="Model.comments_by_game_id (method)">comments_by_game_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_comments'>comments</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='id identifier rubyid_comments'>comments</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_comment'>comment</span><span class='op'>|</span> <span class='id identifier rubyid_comment'>comment</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>username</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_username_by_comment_id'><span class='object_link'><a href="Model.html#username_by_comment_id-class_method" title="Model.username_by_comment_id (method)">username_by_comment_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_comment'>comment</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>  

  <span class='id identifier rubyid_imgpath'>imgpath</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/img/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.jpg</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;games/show&#39;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>game:</span><span class='id identifier rubyid_game'>game</span><span class='comma'>,</span> <span class='label'>console:</span><span class='id identifier rubyid_console'>console</span><span class='comma'>,</span> <span class='label'>genres:</span><span class='id identifier rubyid_genres'>genres</span><span class='comma'>,</span> <span class='label'>imgpath:</span><span class='id identifier rubyid_imgpath'>imgpath</span><span class='comma'>,</span> <span class='label'>genre_or_genres:</span><span class='id identifier rubyid_genre_or_genres'>genre_or_genres</span><span class='comma'>,</span> <span class='label'>comments:</span><span class='id identifier rubyid_comments'>comments</span><span class='comma'>,</span> <span class='label'>id:</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>whosloggedin:</span><span class='id identifier rubyid_whosloggedin'>whosloggedin</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__database_edit-instance_method">
  
    #<strong>GET /database/edit</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays list of all games in database along with forms for editing their attributes</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#username_is_admin%3F-class_method" title="Model.username_is_admin? (method)">Model.username_is_admin?</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#all_games-class_method" title="Model.all_games (method)">Model.all_games</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#all_consoles-class_method" title="Model.all_consoles (method)">Model.all_consoles</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#all_genres-class_method" title="Model.all_genres (method)">Model.all_genres</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#genres_of_game_by_id-class_method" title="Model.genres_of_game_by_id (method)">Model.genres_of_game_by_id</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 44</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_username_is_admin?'><span class='object_link'><a href="Model.html#username_is_admin%3F-class_method" title="Model.username_is_admin? (method)">username_is_admin?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This page is only accessible for admin users</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_games'>games</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all_games'><span class='object_link'><a href="Model.html#all_games-class_method" title="Model.all_games (method)">all_games</a></span></span>
  <span class='id identifier rubyid_consoles'>consoles</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all_consoles'><span class='object_link'><a href="Model.html#all_consoles-class_method" title="Model.all_consoles (method)">all_consoles</a></span></span>
  <span class='id identifier rubyid_genres'>genres</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all_genres'><span class='object_link'><a href="Model.html#all_genres-class_method" title="Model.all_genres (method)">all_genres</a></span></span>

  <span class='id identifier rubyid_game_genres'>game_genres</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>      
  <span class='id identifier rubyid_games'>games</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_game'>game</span><span class='op'>|</span>    
    <span class='id identifier rubyid_array'>array</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_game'>game</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_genres_of_current_game'>genres_of_current_game</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_genres_of_game_by_id'><span class='object_link'><a href="Model.html#genres_of_game_by_id-class_method" title="Model.genres_of_game_by_id (method)">genres_of_game_by_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_game'>game</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>id</span><span class='tstring_end'>&#39;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_string_of_genres'>string_of_genres</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_genres_of_current_game'>genres_of_current_game</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_genre'>genre</span><span class='op'>|</span>
      <span class='id identifier rubyid_string_of_genres'>string_of_genres</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_genre'>genre</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_array'>array</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_string_of_genres'>string_of_genres</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_game_genres'>game_genres</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_array'>array</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_game_genres'>game_genres</span> <span class='op'>=</span> <span class='id identifier rubyid_game_genres'>game_genres</span><span class='period'>.</span><span class='id identifier rubyid_to_h'>to_h</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;games/edit&#39;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>games:</span><span class='id identifier rubyid_games'>games</span><span class='comma'>,</span> <span class='label'>consoles:</span><span class='id identifier rubyid_consoles'>consoles</span><span class='comma'>,</span> <span class='label'>game_genres:</span><span class='id identifier rubyid_game_genres'>game_genres</span><span class='comma'>,</span> <span class='label'>genres:</span><span class='id identifier rubyid_genres'>genres</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__database_new-instance_method">
  
    #<strong>GET /database/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Displays form for entering a new game into the database</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#username_is_admin%3F-class_method" title="Model.username_is_admin? (method)">Model.username_is_admin?</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#all_consoles-class_method" title="Model.all_consoles (method)">Model.all_consoles</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#all_genres-class_method" title="Model.all_genres (method)">Model.all_genres</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80
81
82
83
84
85
86
87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 77</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>

  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_username_is_admin?'><span class='object_link'><a href="Model.html#username_is_admin%3F-class_method" title="Model.username_is_admin? (method)">username_is_admin?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>This page is only accessible for admin users</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_consoles'>consoles</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all_consoles'><span class='object_link'><a href="Model.html#all_consoles-class_method" title="Model.all_consoles (method)">all_consoles</a></span></span>
  <span class='id identifier rubyid_genres'>genres</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_all_genres'><span class='object_link'><a href="Model.html#all_genres-class_method" title="Model.all_genres (method)">all_genres</a></span></span>

  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:&#39;games/new&#39;</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>consoles:</span><span class='id identifier rubyid_consoles'>consoles</span><span class='comma'>,</span> <span class='label'>genres:</span><span class='id identifier rubyid_genres'>genres</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__error-instance_method">
  
    #<strong>GET /error</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Error page. Displays unique error message depending on where the error was detected.</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 143</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:error</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>error_text:</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>error_redirect:</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="GET__login-instance_method">
  
    #<strong>GET /login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Simple login and account creation page</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 138</span>

<span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_slim'>slim</span><span class='lparen'>(</span><span class='symbol'>:login</span><span class='comma'>,</span> <span class='label'>locals:</span><span class='lbrace'>{</span><span class='label'>whosloggedin:</span><span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST___id_deletecomment__comment_id-instance_method">
  
    #<strong>POST /:id/deletecomment/:comment_id</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Deletes a comment from the database. The delete button is not displayed for comments which you don’t own.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ID of the game</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:comment_id,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ID of the comment</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#delete_comment-class_method" title="Model.delete_comment (method)">Model.delete_comment</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 186</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/:id/deletecomment/:comment_id</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span> 
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_game_id'>game_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_comment_id'>comment_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:comment_id</span><span class='rbracket'>]</span>
  <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_delete_comment'><span class='object_link'><a href="Model.html#delete_comment-class_method" title="Model.delete_comment (method)">delete_comment</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_comment_id'>comment_id</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/database/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_game_id'>game_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST___id_writecomment-instance_method">
  
    #<strong>POST /:id/writecomment</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Submits a comment into the database along with the current user’s id, the game’s id and its own unique comment id.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ID of the game</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>content,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the content of the comment</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#user_id_by_username-class_method" title="Model.user_id_by_username (method)">Model.user_id_by_username</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#add_comment-class_method" title="Model.add_comment (method)">Model.add_comment</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174
175
176
177
178
179</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 165</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/:id/writecomment</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>nil</span> 
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span>

  <span class='id identifier rubyid_content'>content</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:content</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_user_id'>user_id</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_user_id_by_username'><span class='object_link'><a href="Model.html#user_id_by_username-class_method" title="Model.user_id_by_username (method)">user_id_by_username</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_comment'><span class='object_link'><a href="Model.html#add_comment-class_method" title="Model.add_comment (method)">add_comment</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:content</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_user_id'>user_id</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  

  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/database/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__createaccount-instance_method">
  
    #<strong>POST /createaccount</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates a new user depending on if the password is acceptable and username isn’t already taken. This route is called from the get route /login.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>username,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the username taken from the “username” box in the login.slim createaccount form.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the unencrypted password taken from the “password” box in the login.slim createaccount form.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>passwordconfirm,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the unencrypted password taken from the “confirm password” box in the login.slim createaccount form.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#username_is_unique%3F-class_method" title="Model.username_is_unique? (method)">Model.username_is_unique?</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#create_account-class_method" title="Model.create_account (method)">Model.create_account</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 282</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/createaccount</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_passwordconfirm'>passwordconfirm</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:passwordconfirm</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span> <span class='op'>||</span> <span class='id identifier rubyid_username'>username</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid login: you must fill in all required boxes</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>!=</span> <span class='id identifier rubyid_passwordconfirm'>passwordconfirm</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid login: both passwords must match</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id identifier rubyid_password'>password</span> <span class='op'>!~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(?=.*\d)(?=.*[[:punct:]])(?=.*[[:upper:]]).*$</span><span class='regexp_end'>/</span></span> <span class='op'>||</span> <span class='id identifier rubyid_password'>password</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&lt;</span> <span class='int'>8</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid login: password must be longer than 8 symbols and contain at least one digit, one capital letter, and one special character</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_username_is_unique?'><span class='object_link'><a href="Model.html#username_is_unique%3F-class_method" title="Model.username_is_unique? (method)">username_is_unique?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid login: a user with that name already exists</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_pwdigest'>pwdigest</span> <span class='op'>=</span> <span class='const'>BCrypt</span><span class='op'>::</span><span class='const'>Password</span><span class='period'>.</span><span class='id identifier rubyid_create'>create</span><span class='lparen'>(</span><span class='id identifier rubyid_password'>password</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create_account'><span class='object_link'><a href="Model.html#create_account-class_method" title="Model.create_account (method)">create_account</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='comma'>,</span> <span class='id identifier rubyid_pwdigest'>pwdigest</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__database__id_delete-instance_method">
  
    #<strong>POST /database/:id/delete</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Deletes a game from the database. This route is called from the get route /database/edit.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ID of the game</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#delete_game-class_method" title="Model.delete_game (method)">Model.delete_game</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


237
238
239
240</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 237</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/:id/delete</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_delete_game'><span class='object_link'><a href="Model.html#delete_game-class_method" title="Model.delete_game (method)">delete_game</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__database__id_update-instance_method">
  
    #<strong>POST /database/:id/update</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Updates a game’s attributes. This route is called from the get route /database/edit.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:id,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ID of the game</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:title,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the title of the game as written into the form</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:release_year,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the release year of the game as written into the form</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:console_id,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the console the game belongs to as written into the form</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:part_of_series,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>can be “Yes” or “No” depending on if the game is part of a series of games. Think of it like a boolean except SQL doesn’t give you shit.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:genres,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ids of the genres the game belongs to, separated by spaces</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#update_game-class_method" title="Model.update_game (method)">Model.update_game</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#game_genres_delete_all_by_game_id-class_method" title="Model.game_genres_delete_all_by_game_id (method)">Model.game_genres_delete_all_by_game_id</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#game_genres_insert_new-class_method" title="Model.game_genres_insert_new (method)">Model.game_genres_insert_new</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 209</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/:id/update</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
  <span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_release_year'>release_year</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:release_year</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_console_id'>console_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:console_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_part_of_series'>part_of_series</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:part_of_series</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_genre_ids'>genre_ids</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:genres</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='lbracket'>[</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_release_year'>release_year</span><span class='comma'>,</span> <span class='id identifier rubyid_console_id'>console_id</span><span class='comma'>,</span> <span class='id identifier rubyid_part_of_series'>part_of_series</span><span class='comma'>,</span> <span class='id identifier rubyid_genre_ids'>genre_ids</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_param'>param</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_param'>param</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invalid entry: every box must be filled</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/edit</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_update_game'><span class='object_link'><a href="Model.html#update_game-class_method" title="Model.update_game (method)">update_game</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_release_year'>release_year</span><span class='comma'>,</span> <span class='id identifier rubyid_console_id'>console_id</span><span class='comma'>,</span> <span class='id identifier rubyid_part_of_series'>part_of_series</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_game_genres_delete_all_by_game_id'><span class='object_link'><a href="Model.html#game_genres_delete_all_by_game_id-class_method" title="Model.game_genres_delete_all_by_game_id (method)">game_genres_delete_all_by_game_id</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_genre_ids'>genre_ids</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_genre_id'>genre_id</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_game_genres_insert_new'><span class='object_link'><a href="Model.html#game_genres_insert_new-class_method" title="Model.game_genres_insert_new (method)">game_genres_insert_new</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_genre_id'>genre_id</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/edit</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__database_new-instance_method">
  
    #<strong>POST /database/new</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Inserts a new game into the database. This route is called from the get route /database/new.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>:title,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the title of the game as written into the form</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:release_year,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the release year of the game as written into the form</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:console_id,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the id of the console the game belongs to as written into the form</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:part_of_series,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>can be “Yes” or “No” depending on if the game is part of a series of games. Think of it like a boolean except SQL doesn’t give you shit.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>:genres,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the ids of the genres the game belongs to, separated by spaces</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Model.html#create_id_for_new_game-class_method" title="Model.create_id_for_new_game (method)">Model.create_id_for_new_game</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#add_game_genres-class_method" title="Model.add_game_genres (method)">Model.add_game_genres</a></span></li>
    
      <li><span class='object_link'><a href="Model.html#insert_into_new_game-class_method" title="Model.insert_into_new_game (method)">Model.insert_into_new_game</a></span></li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 252</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/new</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_title'>title</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:title</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_release_year'>release_year</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:release_year</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_console_id'>console_id</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:console_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_part_of_series'>part_of_series</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:part_of_series</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_genres'>genres</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:genres</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'> </span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>

  <span class='lbracket'>[</span><span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_release_year'>release_year</span><span class='comma'>,</span> <span class='id identifier rubyid_console_id'>console_id</span><span class='comma'>,</span> <span class='id identifier rubyid_part_of_series'>part_of_series</span><span class='comma'>,</span> <span class='id identifier rubyid_genres'>genres</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_param'>param</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_param'>param</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>invalid entry: you must fill in all required boxes</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database/new</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create_id_for_new_game'><span class='object_link'><a href="Model.html#create_id_for_new_game-class_method" title="Model.create_id_for_new_game (method)">create_id_for_new_game</a></span></span>
  <span class='id identifier rubyid_genres'>genres</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_genre'>genre</span><span class='op'>|</span>
    <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_add_game_genres'><span class='object_link'><a href="Model.html#add_game_genres-class_method" title="Model.add_game_genres (method)">add_game_genres</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_genre'>genre</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_insert_into_new_game'><span class='object_link'><a href="Model.html#insert_into_new_game-class_method" title="Model.insert_into_new_game (method)">insert_into_new_game</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_title'>title</span><span class='comma'>,</span> <span class='id identifier rubyid_release_year'>release_year</span><span class='comma'>,</span> <span class='id identifier rubyid_console_id'>console_id</span><span class='comma'>,</span> <span class='id identifier rubyid_part_of_series'>part_of_series</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/database</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__login-instance_method">
  
    #<strong>POST /login</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the session variable “whosloggedin” to your username if you enter the right password for an existing username.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>username,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the username taken from the “username” box in the login.slim login form.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>password,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the unencrypted password taken from the “password” box in the login.slim login form.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>passwordconfirm,</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the unencrypted password taken from the “confirm password” box in the login.slim login form.</p>
</div>
      
    </li>
  
</ul>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Model#username_is_unique</li>
    
      <li>Model#pwdigest_by_user</li>
    
  </ul>



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 318</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_username'>username</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_password'>password</span> <span class='op'>=</span> <span class='id identifier rubyid_params'>params</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_username_is_unique?'><span class='object_link'><a href="Model.html#username_is_unique%3F-class_method" title="Model.username_is_unique? (method)">username_is_unique?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_pwdigest'>pwdigest</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Model.html" title="Model (module)">Model</a></span></span><span class='period'>.</span><span class='id identifier rubyid_pwdigest_by_user'>pwdigest_by_user</span><span class='lparen'>(</span><span class='id identifier rubyid_username'>username</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='const'>BCrypt</span><span class='op'>::</span><span class='const'>Password</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_pwdigest'>pwdigest</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id identifier rubyid_password'>password</span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_username'>username</span>
      <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid login: wrong password for that user</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span>
      <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_text</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>invalid login: no user with that username exists</span><span class='tstring_end'>&quot;</span></span>
    <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:error_redirect</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/error</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="POST__logout-instance_method">
  
    #<strong>POST /logout</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Sets the session variable “whosloggedin” to nil.</p>


  </div>
</div>
<div class="tags">
  



</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'app.rb', line 340</span>

<span class='id identifier rubyid_post'>post</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/logout</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_session'>session</span><span class='lbracket'>[</span><span class='symbol'>:whosloggedin</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_redirect'>redirect</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/login</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Apr 25 19:25:05 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.34 (ruby-3.1.2).
</div>

    </div>
  </body>
</html>